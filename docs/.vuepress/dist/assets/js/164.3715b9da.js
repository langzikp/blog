(window.webpackJsonp=window.webpackJsonp||[]).push([[164],{597:function(v,_,t){"use strict";t.r(_);var e=t(34),o=Object(e.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"浏览器的通信能力"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#浏览器的通信能力"}},[v._v("#")]),v._v(" 浏览器的通信能力")]),v._v(" "),t("h2",{attrs:{id:"用户代理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用户代理"}},[v._v("#")]),v._v(" 用户代理")]),v._v(" "),t("p",[v._v("浏览器可以代替用户完成http请求，代替用户解析响应结果，所以我们称之为：")]),v._v(" "),t("p",[t("strong",[v._v("用户代理 user agent")])]),v._v(" "),t("p",[v._v("在网络层面，对于前端开发者，必须要知道浏览器拥有的两大核心能力：")]),v._v(" "),t("ul",[t("li",[v._v("自动发出请求的能力")]),v._v(" "),t("li",[v._v("自动解析响应的能力")])]),v._v(" "),t("h3",{attrs:{id:"自动发出请求的能力"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自动发出请求的能力"}},[v._v("#")]),v._v(" 自动发出请求的能力")]),v._v(" "),t("p",[v._v("当一些事情发生的时候，浏览器会代替用户自动发出http请求，常见的包括：")]),v._v(" "),t("ol",[t("li",[t("p",[t("strong",[v._v("用户在地址栏输入了一个url地址，并按下了回车")])]),v._v(" "),t("p",[v._v("浏览器会自动解析URL，并发出一个"),t("code",[v._v("GET")]),v._v("请求，同时抛弃当前页面。")])]),v._v(" "),t("li",[t("p",[t("strong",[v._v("当用户点击了页面中的a元素")])]),v._v(" "),t("p",[v._v("浏览器会拿到a元素的href地址，并发出一个"),t("code",[v._v("GET")]),v._v("请求，同时抛弃当前页面。")])]),v._v(" "),t("li",[t("p",[t("strong",[v._v("当用户点击了提交按钮"),t("code",[v._v('<button type="submit">...</button>')])])]),v._v(" "),t("p",[v._v("浏览器会获取按钮所在的"),t("code",[v._v("<form>")]),v._v("元素，拿到它的"),t("code",[v._v("action")]),v._v("属性地址，同时拿到它"),t("code",[v._v("method")]),v._v("属性值，然后把表单中的数据组织到请求体中，发出"),t("code",[v._v("指定方法")]),v._v("的请求，同时抛弃当前页面。")]),v._v(" "),t("blockquote",[t("p",[v._v("这种方式的提交现在越来越少见了")])])]),v._v(" "),t("li",[t("p",[t("strong",[v._v("当解析HTML时遇到了"),t("code",[v._v("<link> <img> <script> <video> <audio>")]),v._v("等元素")])]),v._v(" "),t("p",[v._v("浏览器会拿到对应的地址，发出"),t("code",[v._v("GET")]),v._v("请求")])]),v._v(" "),t("li",[t("p",[t("strong",[v._v("当用户点击了刷新")])]),v._v(" "),t("p",[v._v("浏览器会拿到当前页面的地址，以及当前页面的请求方法，重新发一次请求，同时抛弃当前页面。")])])]),v._v(" "),t("blockquote",[t("p",[v._v("浏览器在发出请求时，会自动附带一些请求头")])]),v._v(" "),t("p",[v._v("==重点来了==")]),v._v(" "),t("p",[v._v("从古至今，浏览器都有一个约定：")]),v._v(" "),t("p",[t("strong",[v._v("当发送GET请求时，浏览器不会附带请求体")])]),v._v(" "),t("p",[v._v("这个约定深刻的影响着后续的前后端各种应用，现在，几乎所有人都在潜意识中认同了这一点，无论是前端开发人员还是后端开发人员。")]),v._v(" "),t("p",[v._v("由于前后端程序的默认行为，逐步造成了GET和POST的各种差异：")]),v._v(" "),t("ol",[t("li",[t("p",[v._v("浏览器在发送 GET 请求时，不会附带请求体")])]),v._v(" "),t("li",[t("p",[v._v("GET 请求的传递信息量有限，适合传递少量数据；POST 请求的传递信息量是没有限制的，适合传输大量数据。")])]),v._v(" "),t("li",[t("p",[v._v("GET 请求只能传递 ASCII 数据，遇到非 ASCII 数据需要进行编码；POST 请求没有限制")])]),v._v(" "),t("li",[t("p",[v._v("大部分 GET 请求传递的数据都附带在 path 参数中，能够通过分享地址完整的重现页面，但同时也暴露了数据，若有敏感数据传递，不应该使用 GET 请求，至少不应该放到 path 中")])]),v._v(" "),t("li",[t("p",[v._v("POST 不会被保存到浏览器的历史记录中")])]),v._v(" "),t("li",[t("p",[v._v("刷新页面时，若当前的页面是通过 POST 请求得到的，则浏览器会提示用户是否重新提交。若是 GET 请求得到的页面则没有提示。")])])]),v._v(" "),t("h3",{attrs:{id:"自动解析响应的能力"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自动解析响应的能力"}},[v._v("#")]),v._v(" 自动解析响应的能力")]),v._v(" "),t("p",[v._v("浏览器不仅能发送请求，还能够针对服务器的各种响应结果做出不同的自动处理")]),v._v(" "),t("p",[v._v("常见的处理有：")]),v._v(" "),t("ol",[t("li",[t("p",[t("strong",[v._v("识别响应码")])]),v._v(" "),t("p",[v._v("浏览器能够自动识别响应码，当出现一些特殊的响应码时浏览器会自动完成处理，比如"),t("code",[v._v("301、302")])])]),v._v(" "),t("li",[t("p",[t("strong",[v._v("根据响应结果做不同的处理")])]),v._v(" "),t("p",[v._v("浏览器能够自动分析响应头中的"),t("code",[v._v("Content-Type")]),v._v("，根据不同的值进行不同处理，比如：")]),v._v(" "),t("ul",[t("li",[t("p",[t("code",[v._v("text/plain")]),v._v(": 普通的纯文本，浏览器通常会将响应体原封不动的显示到页面上")])]),v._v(" "),t("li",[t("p",[t("code",[v._v("text/html")]),v._v("：html文档，浏览器通常会将响应体作为页面进行渲染")])]),v._v(" "),t("li",[t("p",[t("code",[v._v("text/javascript")]),v._v("或"),t("code",[v._v("application/javascript")]),v._v("：js代码，浏览器通常会使用JS执行引擎将它解析执行")])]),v._v(" "),t("li",[t("p",[t("code",[v._v("text/css")]),v._v("：css代码，浏览器会将它视为样式")])]),v._v(" "),t("li",[t("p",[t("code",[v._v("image/jpeg")]),v._v("：浏览器会将它视为jpg图片")])]),v._v(" "),t("li",[t("p",[t("code",[v._v("application/octet-stream")]),v._v("：二进制数据，会触发浏览器下载功能")])]),v._v(" "),t("li",[t("p",[t("code",[v._v("attachment")]),v._v("：附件，会触发下载功能")]),v._v(" "),t("p",[v._v("该值和其他值不同，应放到"),t("code",[v._v("Content-Disposition")]),v._v("头中。")])])])])]),v._v(" "),t("h3",{attrs:{id:"基本流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本流程"}},[v._v("#")]),v._v(" 基本流程")]),v._v(" "),t("blockquote",[t("p",[v._v("访问：https://oss.duyiedu.com/test/index.html")])]),v._v(" "),t("img",{attrs:{src:v.$withBase("/img/network/12.png"),alt:"图片"}}),v._v(" "),t("h2",{attrs:{id:"ajax"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ajax"}},[v._v("#")]),v._v(" AJAX")]),v._v(" "),t("blockquote",[t("p",[v._v("浏览器本身就具备网络通信的能力，但在早期，浏览器并没有把这个能力开放给JS。")]),v._v(" "),t("p",[v._v("最早是微软在IE浏览器中把这一能力向JS开放，让JS可以在代码中实现发送请求，并不会刷新页面，这项技术在2005年被正式命名为AJAX（"),t("strong",[v._v("A")]),v._v("synchronous "),t("strong",[v._v("J")]),v._v("avascript "),t("strong",[v._v("A")]),v._v("nd "),t("strong",[v._v("X")]),v._v("ML）")])]),v._v(" "),t("p",[v._v("AJAX 就是指在web应用程序中异步向服务器发送请求。")]),v._v(" "),t("p",[v._v("它的实现方式有两种，"),t("code",[v._v("XMLHttpRequest 简称XHR")]),v._v("和"),t("code",[v._v("Fetch")])]),v._v(" "),t("p",[v._v("以下是两者的对比")]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("功能点")]),v._v(" "),t("th",[v._v("XHR")]),v._v(" "),t("th",[v._v("Fetch")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("基本的请求能力")]),v._v(" "),t("td",[v._v("✅")]),v._v(" "),t("td",[v._v("✅")])]),v._v(" "),t("tr",[t("td",[v._v("基本的获取响应能力")]),v._v(" "),t("td",[v._v("✅")]),v._v(" "),t("td",[v._v("✅")])]),v._v(" "),t("tr",[t("td",[v._v("监控请求进度")]),v._v(" "),t("td",[v._v("✅")]),v._v(" "),t("td",[v._v("❌")])]),v._v(" "),t("tr",[t("td",[v._v("监控响应进度")]),v._v(" "),t("td",[v._v("✅")]),v._v(" "),t("td",[v._v("✅")])]),v._v(" "),t("tr",[t("td",[v._v("Service Worker中是否可用")]),v._v(" "),t("td",[v._v("❌")]),v._v(" "),t("td",[v._v("✅")])]),v._v(" "),t("tr",[t("td",[v._v("控制cookie的携带")]),v._v(" "),t("td",[v._v("❌")]),v._v(" "),t("td",[v._v("✅")])]),v._v(" "),t("tr",[t("td",[v._v("控制重定向")]),v._v(" "),t("td",[v._v("❌")]),v._v(" "),t("td",[v._v("✅")])]),v._v(" "),t("tr",[t("td",[v._v("请求取消")]),v._v(" "),t("td",[v._v("✅")]),v._v(" "),t("td",[v._v("✅")])]),v._v(" "),t("tr",[t("td",[v._v("自定义referrer")]),v._v(" "),t("td",[v._v("❌")]),v._v(" "),t("td",[v._v("✅")])]),v._v(" "),t("tr",[t("td",[v._v("流")]),v._v(" "),t("td",[v._v("❌")]),v._v(" "),t("td",[v._v("✅")])]),v._v(" "),t("tr",[t("td",[v._v("API风格")]),v._v(" "),t("td",[t("code",[v._v("Event")])]),v._v(" "),t("td",[t("code",[v._v("Promise")])])]),v._v(" "),t("tr",[t("td",[v._v("活跃度")]),v._v(" "),t("td",[v._v("停止更新")]),v._v(" "),t("td",[v._v("不断更新")])])])])])}),[],!1,null,null,null);_.default=o.exports}}]);