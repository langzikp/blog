<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>性能优化概述 | Lang&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/img/favicon.png">
    <meta name="description" content="this is my blog">
    
    <link rel="preload" href="/blog/assets/css/0.styles.99ff6c37.css" as="style"><link rel="preload" href="/blog/assets/js/app.0f56b445.js" as="script"><link rel="preload" href="/blog/assets/js/2.a77c63c4.js" as="script"><link rel="preload" href="/blog/assets/js/33.26dc1e8b.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.4d5e23ca.js"><link rel="prefetch" href="/blog/assets/js/100.4c43e71d.js"><link rel="prefetch" href="/blog/assets/js/101.d7d14f77.js"><link rel="prefetch" href="/blog/assets/js/102.224500b7.js"><link rel="prefetch" href="/blog/assets/js/103.da1efb45.js"><link rel="prefetch" href="/blog/assets/js/104.0feb7c48.js"><link rel="prefetch" href="/blog/assets/js/105.28526ca6.js"><link rel="prefetch" href="/blog/assets/js/106.821ca8d2.js"><link rel="prefetch" href="/blog/assets/js/107.3bcab476.js"><link rel="prefetch" href="/blog/assets/js/108.93fad17a.js"><link rel="prefetch" href="/blog/assets/js/109.db4f0710.js"><link rel="prefetch" href="/blog/assets/js/11.e0d69fa8.js"><link rel="prefetch" href="/blog/assets/js/110.4118b706.js"><link rel="prefetch" href="/blog/assets/js/111.8c9ee68a.js"><link rel="prefetch" href="/blog/assets/js/112.52c30735.js"><link rel="prefetch" href="/blog/assets/js/113.ab3accf0.js"><link rel="prefetch" href="/blog/assets/js/114.17ef89a5.js"><link rel="prefetch" href="/blog/assets/js/115.511b04fb.js"><link rel="prefetch" href="/blog/assets/js/116.d79541d0.js"><link rel="prefetch" href="/blog/assets/js/117.76a0a2c6.js"><link rel="prefetch" href="/blog/assets/js/118.8d2a1ab0.js"><link rel="prefetch" href="/blog/assets/js/119.903f77be.js"><link rel="prefetch" href="/blog/assets/js/12.01c27acc.js"><link rel="prefetch" href="/blog/assets/js/120.8a7573ee.js"><link rel="prefetch" href="/blog/assets/js/121.119af64c.js"><link rel="prefetch" href="/blog/assets/js/122.c4f8b0f6.js"><link rel="prefetch" href="/blog/assets/js/123.db1eac22.js"><link rel="prefetch" href="/blog/assets/js/124.3be4e27f.js"><link rel="prefetch" href="/blog/assets/js/125.2deae10a.js"><link rel="prefetch" href="/blog/assets/js/126.6c6a283a.js"><link rel="prefetch" href="/blog/assets/js/127.952aaeb1.js"><link rel="prefetch" href="/blog/assets/js/128.caea1785.js"><link rel="prefetch" href="/blog/assets/js/129.87994866.js"><link rel="prefetch" href="/blog/assets/js/13.c635c6ec.js"><link rel="prefetch" href="/blog/assets/js/130.659f2a78.js"><link rel="prefetch" href="/blog/assets/js/131.4a303863.js"><link rel="prefetch" href="/blog/assets/js/132.7b345d6c.js"><link rel="prefetch" href="/blog/assets/js/133.7b217f3a.js"><link rel="prefetch" href="/blog/assets/js/134.a37e5419.js"><link rel="prefetch" href="/blog/assets/js/135.62b68c7c.js"><link rel="prefetch" href="/blog/assets/js/136.4e0f8ae8.js"><link rel="prefetch" href="/blog/assets/js/137.8c1e2aab.js"><link rel="prefetch" href="/blog/assets/js/138.0563ce9a.js"><link rel="prefetch" href="/blog/assets/js/139.7fb8eb78.js"><link rel="prefetch" href="/blog/assets/js/14.63a45543.js"><link rel="prefetch" href="/blog/assets/js/140.ccc3aef7.js"><link rel="prefetch" href="/blog/assets/js/141.621f26b9.js"><link rel="prefetch" href="/blog/assets/js/142.6cb35fb6.js"><link rel="prefetch" href="/blog/assets/js/143.5e6d11ee.js"><link rel="prefetch" href="/blog/assets/js/144.8477513f.js"><link rel="prefetch" href="/blog/assets/js/145.439c17a9.js"><link rel="prefetch" href="/blog/assets/js/146.769eb3cf.js"><link rel="prefetch" href="/blog/assets/js/147.cc823d79.js"><link rel="prefetch" href="/blog/assets/js/148.66959177.js"><link rel="prefetch" href="/blog/assets/js/149.eaa6f1bb.js"><link rel="prefetch" href="/blog/assets/js/15.eccbff81.js"><link rel="prefetch" href="/blog/assets/js/150.b0d8ee75.js"><link rel="prefetch" href="/blog/assets/js/151.aa2e8349.js"><link rel="prefetch" href="/blog/assets/js/152.38d757a7.js"><link rel="prefetch" href="/blog/assets/js/153.1517153a.js"><link rel="prefetch" href="/blog/assets/js/154.91458aa3.js"><link rel="prefetch" href="/blog/assets/js/155.4f46aaf3.js"><link rel="prefetch" href="/blog/assets/js/156.34a24a97.js"><link rel="prefetch" href="/blog/assets/js/157.3d284425.js"><link rel="prefetch" href="/blog/assets/js/158.d8d5d0ef.js"><link rel="prefetch" href="/blog/assets/js/159.bcf0b657.js"><link rel="prefetch" href="/blog/assets/js/16.19b010da.js"><link rel="prefetch" href="/blog/assets/js/160.d3a857c6.js"><link rel="prefetch" href="/blog/assets/js/161.25af5b99.js"><link rel="prefetch" href="/blog/assets/js/162.e1056cf2.js"><link rel="prefetch" href="/blog/assets/js/163.81bc4465.js"><link rel="prefetch" href="/blog/assets/js/164.d3719e1c.js"><link rel="prefetch" href="/blog/assets/js/165.0645d85c.js"><link rel="prefetch" href="/blog/assets/js/166.8fb29977.js"><link rel="prefetch" href="/blog/assets/js/167.306f0115.js"><link rel="prefetch" href="/blog/assets/js/168.f2649dc6.js"><link rel="prefetch" href="/blog/assets/js/169.3f4381ea.js"><link rel="prefetch" href="/blog/assets/js/17.c43dde6b.js"><link rel="prefetch" href="/blog/assets/js/170.d7803d4e.js"><link rel="prefetch" href="/blog/assets/js/171.150a87b8.js"><link rel="prefetch" href="/blog/assets/js/172.9e000db1.js"><link rel="prefetch" href="/blog/assets/js/18.f1696a39.js"><link rel="prefetch" href="/blog/assets/js/19.4a1e084d.js"><link rel="prefetch" href="/blog/assets/js/20.bd334842.js"><link rel="prefetch" href="/blog/assets/js/21.1ae7e72a.js"><link rel="prefetch" href="/blog/assets/js/22.e115d5a0.js"><link rel="prefetch" href="/blog/assets/js/23.91aa8ecb.js"><link rel="prefetch" href="/blog/assets/js/24.f45364fb.js"><link rel="prefetch" href="/blog/assets/js/25.9f9989bc.js"><link rel="prefetch" href="/blog/assets/js/26.ed967536.js"><link rel="prefetch" href="/blog/assets/js/27.465c3f10.js"><link rel="prefetch" href="/blog/assets/js/28.781e95ed.js"><link rel="prefetch" href="/blog/assets/js/29.683b9ead.js"><link rel="prefetch" href="/blog/assets/js/3.3b171cbb.js"><link rel="prefetch" href="/blog/assets/js/30.c55ca1a1.js"><link rel="prefetch" href="/blog/assets/js/31.10b39f92.js"><link rel="prefetch" href="/blog/assets/js/32.f23322aa.js"><link rel="prefetch" href="/blog/assets/js/34.5963d8d1.js"><link rel="prefetch" href="/blog/assets/js/35.1831ca34.js"><link rel="prefetch" href="/blog/assets/js/36.0ac19716.js"><link rel="prefetch" href="/blog/assets/js/37.e8edaabf.js"><link rel="prefetch" href="/blog/assets/js/38.32a546ec.js"><link rel="prefetch" href="/blog/assets/js/39.c45624d8.js"><link rel="prefetch" href="/blog/assets/js/4.48084369.js"><link rel="prefetch" href="/blog/assets/js/40.28212bf7.js"><link rel="prefetch" href="/blog/assets/js/41.4e9eccf6.js"><link rel="prefetch" href="/blog/assets/js/42.dba1adce.js"><link rel="prefetch" href="/blog/assets/js/43.8c4df797.js"><link rel="prefetch" href="/blog/assets/js/44.630947b9.js"><link rel="prefetch" href="/blog/assets/js/45.3e0ddb68.js"><link rel="prefetch" href="/blog/assets/js/46.22aebf72.js"><link rel="prefetch" href="/blog/assets/js/47.bdd62076.js"><link rel="prefetch" href="/blog/assets/js/48.5919a447.js"><link rel="prefetch" href="/blog/assets/js/49.ae5a88d4.js"><link rel="prefetch" href="/blog/assets/js/5.adf70ce4.js"><link rel="prefetch" href="/blog/assets/js/50.d47c81d3.js"><link rel="prefetch" href="/blog/assets/js/51.49e489b1.js"><link rel="prefetch" href="/blog/assets/js/52.d2aa3941.js"><link rel="prefetch" href="/blog/assets/js/53.a3562678.js"><link rel="prefetch" href="/blog/assets/js/54.689a3c1a.js"><link rel="prefetch" href="/blog/assets/js/55.933322de.js"><link rel="prefetch" href="/blog/assets/js/56.6c88bdfa.js"><link rel="prefetch" href="/blog/assets/js/57.7e39abb8.js"><link rel="prefetch" href="/blog/assets/js/58.cd58d302.js"><link rel="prefetch" href="/blog/assets/js/59.909f8688.js"><link rel="prefetch" href="/blog/assets/js/6.9afee3a3.js"><link rel="prefetch" href="/blog/assets/js/60.016e38cf.js"><link rel="prefetch" href="/blog/assets/js/61.0aa7392f.js"><link rel="prefetch" href="/blog/assets/js/62.3f72ba29.js"><link rel="prefetch" href="/blog/assets/js/63.a1604d97.js"><link rel="prefetch" href="/blog/assets/js/64.434aa640.js"><link rel="prefetch" href="/blog/assets/js/65.f885453b.js"><link rel="prefetch" href="/blog/assets/js/66.c5e319b9.js"><link rel="prefetch" href="/blog/assets/js/67.c4800829.js"><link rel="prefetch" href="/blog/assets/js/68.0d2d4b32.js"><link rel="prefetch" href="/blog/assets/js/69.3b225889.js"><link rel="prefetch" href="/blog/assets/js/7.7a747ad6.js"><link rel="prefetch" href="/blog/assets/js/70.ada8a4a7.js"><link rel="prefetch" href="/blog/assets/js/71.cff2f683.js"><link rel="prefetch" href="/blog/assets/js/72.a6a5ca0e.js"><link rel="prefetch" href="/blog/assets/js/73.7b6fda7e.js"><link rel="prefetch" href="/blog/assets/js/74.088d6192.js"><link rel="prefetch" href="/blog/assets/js/75.2bd974fd.js"><link rel="prefetch" href="/blog/assets/js/76.c651afab.js"><link rel="prefetch" href="/blog/assets/js/77.9bc5b63b.js"><link rel="prefetch" href="/blog/assets/js/78.3a950ef3.js"><link rel="prefetch" href="/blog/assets/js/79.fa77688e.js"><link rel="prefetch" href="/blog/assets/js/8.61353f86.js"><link rel="prefetch" href="/blog/assets/js/80.12582776.js"><link rel="prefetch" href="/blog/assets/js/81.a7304daf.js"><link rel="prefetch" href="/blog/assets/js/82.e1342cca.js"><link rel="prefetch" href="/blog/assets/js/83.cf3abfc9.js"><link rel="prefetch" href="/blog/assets/js/84.6070562a.js"><link rel="prefetch" href="/blog/assets/js/85.7872c40d.js"><link rel="prefetch" href="/blog/assets/js/86.da2c5ac6.js"><link rel="prefetch" href="/blog/assets/js/87.209dec28.js"><link rel="prefetch" href="/blog/assets/js/88.c20dc4bb.js"><link rel="prefetch" href="/blog/assets/js/89.611df2b7.js"><link rel="prefetch" href="/blog/assets/js/9.18e4e756.js"><link rel="prefetch" href="/blog/assets/js/90.c865dd1c.js"><link rel="prefetch" href="/blog/assets/js/91.254ac972.js"><link rel="prefetch" href="/blog/assets/js/92.c071c941.js"><link rel="prefetch" href="/blog/assets/js/93.5f5605ec.js"><link rel="prefetch" href="/blog/assets/js/94.b82afa92.js"><link rel="prefetch" href="/blog/assets/js/95.2abeb74c.js"><link rel="prefetch" href="/blog/assets/js/96.3dfc0321.js"><link rel="prefetch" href="/blog/assets/js/97.75b98af1.js"><link rel="prefetch" href="/blog/assets/js/98.7d9c44da.js"><link rel="prefetch" href="/blog/assets/js/99.bb388000.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.99ff6c37.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/logo.png" alt="Lang's blog" class="logo"> <span class="site-name can-hide">Lang's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发规范 Menu" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发规范 Menu" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/develop-norm/engineer.html" class="nav-link">
  开发规范
</a></li><li class="dropdown-item"><!----> <a href="/blog/html/notes.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/blog/css/notes.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/blog/javascript/notes.html" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/create.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/notes.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/blog/build-tool/webpack/core.html" class="nav-link">
  构建工具
</a></li><li class="dropdown-item"><!----> <a href="/blog/nodejs/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/blog/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/blog/optimization/data-desensitization.html" class="nav-link">
  优化
</a></li><li class="dropdown-item"><!----> <a href="/blog/web-security/xss.html" class="nav-link">
  前端安全
</a></li><li class="dropdown-item"><!----> <a href="/blog/network/01.html" class="nav-link">
  网络
</a></li></ul></div></div><div class="nav-item"><a href="/blog/backend/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/blog/algorithm/01-algorithm-datastructure.html" class="nav-link">
  算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><span class="title">笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记" class="mobile-dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/course-notes/1-JavaScript进阶/1-1函数/01-内存管理.html" class="nav-link">
  JavaScript进阶
</a></li><li class="dropdown-item"><!----> <a href="/blog/course-notes/2-Vue框架源码and项目实战/2-1课程导学/01-Vue专题导学.html" class="nav-link">
  Vue框架源码&amp;项目实战
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Q&amp;A" class="dropdown-title"><span class="title">Q&amp;A</span> <span class="arrow down"></span></button> <button type="button" aria-label="Q&amp;A" class="mobile-dropdown-title"><span class="title">Q&amp;A</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/interview-question/html-css.html" class="nav-link">
  HTMl-CSS
</a></li><li class="dropdown-item"><!----> <a href="/blog/interview-question/javascript.html" class="nav-link">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习 Menu" class="dropdown-title"><span class="title">记录</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习 Menu" class="mobile-dropdown-title"><span class="title">记录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/booklist/" class="nav-link">
  我的书单
</a></li><li class="dropdown-item"><!----> <a href="/blog/booklist/study.html" class="nav-link">
  学习
</a></li><li class="dropdown-item"><!----> <a href="/blog/booklist/quotations.html" class="nav-link">
  语录
</a></li><li class="dropdown-item"><!----> <a href="/blog/documents/build-blog.html" class="nav-link">
  十分钟搭建自己的个人博客
</a></li><li class="dropdown-item"><!----> <a href="/blog/documents/wechat-h5.html" class="nav-link">
  微信公众号H5配置流程
</a></li><li class="dropdown-item"><!----> <a href="/blog/documents/mini-program-customer-service.html" class="nav-link">
  微信小程序客服绑定流程
</a></li><li class="dropdown-item"><!----> <a href="/blog/documents/mini-program-online.html" class="nav-link">
  微信小程序上线准备
</a></li><li class="dropdown-item"><!----> <a href="/blog/documents/quick-entry.html" class="nav-link">
  前端相关框架
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><span class="title">收藏</span> <span class="arrow down"></span></button> <button type="button" aria-label="收藏" class="mobile-dropdown-title"><span class="title">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          框架及UI库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/collect/frame.html#vue及ui组件库" class="nav-link">
  Vue及UI组件库
</a></li><li class="dropdown-subitem"><a href="/blog/collect/frame.html#react-ui-组件库" class="nav-link">
  React UI 组件库
</a></li><li class="dropdown-subitem"><a href="/blog/collect/frame.html" class="nav-link">
  更多...
</a></li></ul></li><li class="dropdown-item"><h4>
          其他网站
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/collect/sites.html#文档" class="nav-link">
  文档
</a></li><li class="dropdown-subitem"><a href="/blog/collect/sites.html#社区" class="nav-link">
  社区
</a></li><li class="dropdown-subitem"><a href="/blog/collect/sites.html#工具" class="nav-link">
  图片/工具
</a></li><li class="dropdown-subitem"><a href="/blog/collect/sites.html" class="nav-link">
  更多...
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">
  关于
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发规范 Menu" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="开发规范 Menu" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/develop-norm/engineer.html" class="nav-link">
  开发规范
</a></li><li class="dropdown-item"><!----> <a href="/blog/html/notes.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/blog/css/notes.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/blog/javascript/notes.html" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/blog/vue/create.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/blog/react/notes.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/blog/build-tool/webpack/core.html" class="nav-link">
  构建工具
</a></li><li class="dropdown-item"><!----> <a href="/blog/nodejs/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/blog/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/blog/optimization/data-desensitization.html" class="nav-link">
  优化
</a></li><li class="dropdown-item"><!----> <a href="/blog/web-security/xss.html" class="nav-link">
  前端安全
</a></li><li class="dropdown-item"><!----> <a href="/blog/network/01.html" class="nav-link">
  网络
</a></li></ul></div></div><div class="nav-item"><a href="/blog/backend/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/blog/algorithm/01-algorithm-datastructure.html" class="nav-link">
  算法
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><span class="title">笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记" class="mobile-dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/course-notes/1-JavaScript进阶/1-1函数/01-内存管理.html" class="nav-link">
  JavaScript进阶
</a></li><li class="dropdown-item"><!----> <a href="/blog/course-notes/2-Vue框架源码and项目实战/2-1课程导学/01-Vue专题导学.html" class="nav-link">
  Vue框架源码&amp;项目实战
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Q&amp;A" class="dropdown-title"><span class="title">Q&amp;A</span> <span class="arrow down"></span></button> <button type="button" aria-label="Q&amp;A" class="mobile-dropdown-title"><span class="title">Q&amp;A</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/interview-question/html-css.html" class="nav-link">
  HTMl-CSS
</a></li><li class="dropdown-item"><!----> <a href="/blog/interview-question/javascript.html" class="nav-link">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习 Menu" class="dropdown-title"><span class="title">记录</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习 Menu" class="mobile-dropdown-title"><span class="title">记录</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/booklist/" class="nav-link">
  我的书单
</a></li><li class="dropdown-item"><!----> <a href="/blog/booklist/study.html" class="nav-link">
  学习
</a></li><li class="dropdown-item"><!----> <a href="/blog/booklist/quotations.html" class="nav-link">
  语录
</a></li><li class="dropdown-item"><!----> <a href="/blog/documents/build-blog.html" class="nav-link">
  十分钟搭建自己的个人博客
</a></li><li class="dropdown-item"><!----> <a href="/blog/documents/wechat-h5.html" class="nav-link">
  微信公众号H5配置流程
</a></li><li class="dropdown-item"><!----> <a href="/blog/documents/mini-program-customer-service.html" class="nav-link">
  微信小程序客服绑定流程
</a></li><li class="dropdown-item"><!----> <a href="/blog/documents/mini-program-online.html" class="nav-link">
  微信小程序上线准备
</a></li><li class="dropdown-item"><!----> <a href="/blog/documents/quick-entry.html" class="nav-link">
  前端相关框架
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><span class="title">收藏</span> <span class="arrow down"></span></button> <button type="button" aria-label="收藏" class="mobile-dropdown-title"><span class="title">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          框架及UI库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/collect/frame.html#vue及ui组件库" class="nav-link">
  Vue及UI组件库
</a></li><li class="dropdown-subitem"><a href="/blog/collect/frame.html#react-ui-组件库" class="nav-link">
  React UI 组件库
</a></li><li class="dropdown-subitem"><a href="/blog/collect/frame.html" class="nav-link">
  更多...
</a></li></ul></li><li class="dropdown-item"><h4>
          其他网站
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/collect/sites.html#文档" class="nav-link">
  文档
</a></li><li class="dropdown-subitem"><a href="/blog/collect/sites.html#社区" class="nav-link">
  社区
</a></li><li class="dropdown-subitem"><a href="/blog/collect/sites.html#工具" class="nav-link">
  图片/工具
</a></li><li class="dropdown-subitem"><a href="/blog/collect/sites.html" class="nav-link">
  更多...
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">
  关于
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>webpack</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/build-tool/webpack/core.html" class="sidebar-link">webpack核心</a></li><li><a href="/blog/build-tool/webpack/extent.html" class="sidebar-link">常用扩展</a></li><li><a href="/blog/build-tool/webpack/css.html" class="sidebar-link">css工程化</a></li><li><a href="/blog/build-tool/webpack/js.html" class="sidebar-link">js兼容性</a></li><li><a href="/blog/build-tool/webpack/performance.html" aria-current="page" class="active sidebar-link">性能优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#性能优化概述" class="sidebar-link">性能优化概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#构建性能" class="sidebar-link">构建性能</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#传输性能" class="sidebar-link">传输性能</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#运行性能" class="sidebar-link">运行性能</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#_1-减少模块依赖" class="sidebar-link">1. 减少模块依赖</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#什么叫做模块解析" class="sidebar-link">什么叫做模块解析？</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#不做模块解析会怎样" class="sidebar-link">不做模块解析会怎样？</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#哪些模块不需要解析" class="sidebar-link">哪些模块不需要解析？</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#如何让某个模块不要解析" class="sidebar-link">如何让某个模块不要解析？</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#_2-优化loader性能" class="sidebar-link">2. 优化loader性能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#进一步限制loader的应用范围" class="sidebar-link">进一步限制loader的应用范围</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#缓存loader的结果" class="sidebar-link">缓存loader的结果</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#为loader的运行开启多线程" class="sidebar-link">为loader的运行开启多线程</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#_3-热替换" class="sidebar-link">3. 热替换</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#使用和原理" class="sidebar-link">使用和原理</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#样式热替换" class="sidebar-link">样式热替换</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#_4-手动分包" class="sidebar-link">4. 手动分包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#打包公共模块" class="sidebar-link">打包公共模块</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#使用公共模块" class="sidebar-link">使用公共模块</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#总结" class="sidebar-link">总结</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#_5-自动分包" class="sidebar-link">5. 自动分包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#分包策略的基本配置" class="sidebar-link">分包策略的基本配置</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#分包策略的其他配置" class="sidebar-link">分包策略的其他配置</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#缓存组" class="sidebar-link">缓存组</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#配合多页应用" class="sidebar-link">配合多页应用</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#原理" class="sidebar-link">原理</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#代码压缩" class="sidebar-link">代码压缩</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#关于副作用-side-effect" class="sidebar-link">关于副作用 side effect</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#terser" class="sidebar-link">Terser</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#webpack-terser" class="sidebar-link">webpack+Terser</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#tree-shaking" class="sidebar-link">tree-shaking</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#原理-2" class="sidebar-link">原理</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#使用第三方库" class="sidebar-link">使用第三方库</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#作用域分析" class="sidebar-link">作用域分析</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#副作用问题" class="sidebar-link">副作用问题</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#css-tree-shaking" class="sidebar-link">css tree shaking</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#懒加载" class="sidebar-link">懒加载</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#gzip" class="sidebar-link">gzip</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#b-s结构中的压缩传输" class="sidebar-link">B/S结构中的压缩传输</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#使用webpack进行预压缩" class="sidebar-link">使用webpack进行预压缩</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#eslint" class="sidebar-link">ESLint</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#使用-2" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#配置" class="sidebar-link">配置</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/build-tool/webpack/performance.html#bundle-analyzer" class="sidebar-link">bundle-analyzer</a></li></ul></li><li><a href="/blog/build-tool/webpack/extend.html" class="sidebar-link">扩展</a></li></ul></section></li><li><a href="/blog/build-tool/vite.html" class="sidebar-link">vite</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="性能优化概述"><a href="#性能优化概述" class="header-anchor">#</a> 性能优化概述</h2> <p>性能优化主要从以下三个维度入手</p> <h3 id="构建性能"><a href="#构建性能" class="header-anchor">#</a> 构建性能</h3> <p>这里所说的构建性能，是指在<strong>开发阶段的构建性能</strong>，而不是生产环境的构建性能</p> <p>优化的目标，<strong>是降低从打包开始，到代码效果呈现所经过的时间</strong></p> <p>构建性能会影响开发效率。构建性能越高，开发过程中时间的浪费越少</p> <p>以下三种方式提高构建性能：</p> <ul><li>减少模块解析</li> <li>优化loader性能</li> <li>热替换</li></ul> <h3 id="传输性能"><a href="#传输性能" class="header-anchor">#</a> 传输性能</h3> <p>传输性能是指，打包后的JS代码传输到浏览器经过的时间</p> <p>在优化传输性能时要考虑到：</p> <ol><li>总传输量：所有需要传输的JS文件的内容加起来，就是总传输量，重复代码越少，总传输量越少</li> <li>文件数量：当访问页面时，需要传输的JS文件数量，文件数量越多，http请求越多，响应速度越慢</li> <li>浏览器缓存：JS文件会被浏览器缓存，被缓存的文件不会再进行传输</li></ol> <p>以下三种方式提传输性能：</p> <ul><li>分包
<ul><li>手动分包</li> <li>自动分包</li></ul></li> <li>单模块体积优化
<ul><li>代码压缩</li> <li>tree-shaking</li></ul></li> <li>懒加载</li> <li>gzip</li></ul> <h3 id="运行性能"><a href="#运行性能" class="header-anchor">#</a> 运行性能</h3> <p>运行性能是指，JS代码在浏览器端的运行速度</p> <p>它主要取决于我们如何书写高性能的代码</p> <p><strong>永远不要过早的关注于性能</strong>，因为你在开发的时候，无法完全预知最终的运行性能，过早的关注性能会极大的降低开发效率
<strong>性能优化没有完美的解决方案，需要具体情况具体分析</strong></p> <h2 id="_1-减少模块依赖"><a href="#_1-减少模块依赖" class="header-anchor">#</a> 1. 减少模块依赖</h2> <h3 id="什么叫做模块解析"><a href="#什么叫做模块解析" class="header-anchor">#</a> 什么叫做模块解析？</h3> <img src="/blog/img/webpack/12.jpg"> <p>模块解析包括：抽象语法树分析、依赖分析、模块语法替换</p> <h3 id="不做模块解析会怎样"><a href="#不做模块解析会怎样" class="header-anchor">#</a> 不做模块解析会怎样？</h3> <img src="/blog/img/webpack/13.jpg"> <p>如果某个模块不做解析，该模块经过loader处理后的代码就是最终代码。</p> <p>如果没有loader对该模块进行处理，该模块的源码就是最终打包结果的代码。</p> <p>如果不对某个模块进行解析，可以缩短构建时间</p> <h3 id="哪些模块不需要解析"><a href="#哪些模块不需要解析" class="header-anchor">#</a> 哪些模块不需要解析？</h3> <p>模块中无其他依赖：一些已经打包好的第三方库，比如jquery</p> <p><strong>注：如果以后其他依赖则不适用</strong></p> <h2 id="如何让某个模块不要解析"><a href="#如何让某个模块不要解析" class="header-anchor">#</a> 如何让某个模块不要解析？</h2> <p>配置<code>module.noParse</code>，它是一个正则，被正则匹配到的模块不会解析</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">&quot;source-map&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">noParse</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">jquery</span><span class="token regex-delimiter">/</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_2-优化loader性能"><a href="#_2-优化loader性能" class="header-anchor">#</a> 2. 优化loader性能</h2> <h3 id="进一步限制loader的应用范围"><a href="#进一步限制loader的应用范围" class="header-anchor">#</a> 进一步限制loader的应用范围</h3> <p>思路是：对于某些库，不使用loader</p> <p>例如：babel-loader可以转换ES6或更高版本的语法，可是有些库本身就是用ES5语法书写的，不需要转换，使用babel-loader反而会浪费构建时间</p> <p>lodash就是这样的一个库</p> <blockquote><p>lodash是在ES5之前出现的库，使用的是ES3语法</p></blockquote> <p>通过<code>module.rule.exclude</code>或<code>module.rule.include</code>，排除或仅包含需要应用loader的场景</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">lodash</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>如果暴力一点，甚至可以排除掉<code>node_modules</code>目录中的模块，或仅转换<code>src</code>目录的模块</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
                <span class="token comment">//或</span>
                <span class="token comment">// include: /src/,</span>
                <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><p>这种做法是对loader的范围进行进一步的限制，和noParse不冲突，想想看，为什么不冲突</p></blockquote> <h3 id="缓存loader的结果"><a href="#缓存loader的结果" class="header-anchor">#</a> 缓存loader的结果</h3> <p>我们可以基于一种假设：如果某个文件内容不变，经过相同的loader解析后，解析后的结果也不变</p> <p>于是，可以将loader的解析结果保存下来，让后续的解析直接使用保存的结果</p> <p><code>cache-loader</code>可以实现这样的功能</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'cache-loader'</span><span class="token punctuation">,</span> <span class="token operator">...</span>loaders<span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>有趣的是，<code>cache-loader</code>放到最前面，却能够决定后续的loader是否运行</p> <p>实际上，loader的运行过程中，还包含一个过程，即<code>pitch</code></p> <img src="/blog/img/webpack/14.jpg"> <p><code>cache-loader</code>还可以实现各自自定义的配置，具体方式见文档</p> <h3 id="为loader的运行开启多线程"><a href="#为loader的运行开启多线程" class="header-anchor">#</a> 为loader的运行开启多线程</h3> <p><code>thread-loader</code>会开启一个线程池，线程池中包含适量的线程</p> <p>它会把后续的loader放到线程池的线程中运行，以提高构建效率</p> <p>由于后续的loader会放到新的线程中，所以，后续的loader不能：</p> <ul><li>使用 webpack api 生成文件</li> <li>无法使用自定义的 plugin api</li> <li>无法访问 webpack options</li></ul> <blockquote><p>在实际的开发中，可以进行测试，来决定<code>thread-loader</code>放到什么位置</p></blockquote> <p><strong>特别注意</strong>，开启和管理线程需要消耗时间，在小型项目中使用<code>thread-loader</code>反而会增加构建时间</p> <h2 id="_3-热替换"><a href="#_3-热替换" class="header-anchor">#</a> 3. 热替换</h2> <blockquote><p>热替换并不能降低构建时间（可能还会稍微增加），但可以降低代码改动到效果呈现的时间</p></blockquote> <p>当使用<code>webpack-dev-server</code>时，考虑代码改动到效果呈现的过程</p> <img src="/blog/img/webpack/15.jpg"> <p>而使用了热替换后，流程发生了变化</p> <img src="/blog/img/webpack/16.jpg"> <h3 id="使用和原理"><a href="#使用和原理" class="header-anchor">#</a> 使用和原理</h3> <ol><li>更改配置</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span><span class="token boolean">true</span> <span class="token comment">// 开启HMR</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span> 
    <span class="token comment">// 可选</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol start="2"><li>更改代码</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 是否开启了热更新</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 接受热更新</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>首先，这段代码会参与最终运行！</p> <p>当开启了热更新后，<code>webpack-dev-server</code>会向打包结果中注入<code>module.hot</code>属性</p> <p>默认情况下，<code>webpack-dev-server</code>不管是否开启了热更新，当重新打包后，都会调用<code>location.reload</code>刷新页面</p> <p>但如果运行了<code>module.hot.accept()</code>，将改变这一行为</p> <p><code>module.hot.accept()</code>的作用是让<code>webpack-dev-server</code>通过<code>socket</code>管道，把服务器更新的内容发送到浏览器</p> <img src="/blog/img/webpack/17.jpg"> <p>然后，将结果交给插件<code>HotModuleReplacementPlugin</code>注入的代码执行</p> <p>插件<code>HotModuleReplacementPlugin</code>会根据覆盖原始代码，然后让代码重新执行</p> <p><strong>所以，热替换发生在代码运行期</strong></p> <h3 id="样式热替换"><a href="#样式热替换" class="header-anchor">#</a> 样式热替换</h3> <p>对于样式也是可以使用热替换的，但需要使用<code>style-loader</code></p> <p>因为热替换发生时，<code>HotModuleReplacementPlugin</code>只会简单的重新运行模块代码</p> <p>因此<code>style-loader</code>的代码一运行，就会重新设置<code>style</code>元素中的样式</p> <p>而<code>mini-css-extract-plugin</code>，由于它生成文件是在<strong>构建期间</strong>，运行期间并会也无法改动文件，因此它对于热替换是无效的</p> <h2 id="_4-手动分包"><a href="#_4-手动分包" class="header-anchor">#</a> 4. 手动分包</h2> <p>手动分包的总体思路是：</p> <ol><li>先单独的打包公共模块</li></ol> <img src="/blog/img/webpack/18.jpg"> <p>公共模块会被打包成为动态链接库(dll Dynamic Link Library)，并生成资源清单</p> <ol start="2"><li>根据入口模块进行正常打包</li></ol> <p>打包时，如果发现模块中使用了资源清单中描述的模块，则不会形成下面的代码结构</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//源码，入口文件index.js</span>
<span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">&quot;jquery&quot;</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">&quot;lodash&quot;</span>
_<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>由于资源清单中包含<code>jquery</code>和<code>lodash</code>两个模块，因此打包结果的大致格式是：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">modules</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// index.js文件的打包结果并没有变化</span>
  <span class="token string-property property">&quot;./src/index.js&quot;</span><span class="token operator">:</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> __webpack_require__</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> $ <span class="token operator">=</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token string">&quot;./node_modules/jquery/index.js&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> _ <span class="token operator">=</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token string">&quot;./node_modules/lodash/index.js&quot;</span><span class="token punctuation">)</span>
    _<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 由于资源清单中存在，jquery的代码并不会出现在这里</span>
  <span class="token string-property property">&quot;./node_modules/jquery/index.js&quot;</span><span class="token operator">:</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> __webpack_require__</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> jquery<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 由于资源清单中存在，lodash的代码并不会出现在这里</span>
  <span class="token string-property property">&quot;./node_modules/lodash/index.js&quot;</span><span class="token operator">:</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> __webpack_require__</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> lodash<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="打包公共模块"><a href="#打包公共模块" class="header-anchor">#</a> 打包公共模块</h3> <p>打包公共模块是一个<strong>独立的</strong>打包过程</p> <ol><li>单独打包公共模块，暴露变量名</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.dll.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">jquery</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;jquery&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lodash</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;lodash&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;dll/[name].js&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">library</span><span class="token operator">:</span> <span class="token string">&quot;[name]&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="2"><li>利用<code>DllPlugin</code>生成资源清单</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.dll.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dll&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;[name].manifest.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//资源清单的保存位置</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;[name]&quot;</span><span class="token comment">//资源清单中，暴露的变量名</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>运行后，即可完成公共模块打包</p> <h3 id="使用公共模块"><a href="#使用公共模块" class="header-anchor">#</a> 使用公共模块</h3> <ol><li>在页面中手动引入公共模块</li></ol> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./dll/jquery.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./dll/lodash.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>重新设置<code>clean-webpack-plugin</code></li></ol> <p>如果使用了插件<code>clean-webpack-plugin</code>，为了避免它把公共模块清除，需要做出以下配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 要清除的文件或目录</span>
  <span class="token comment">// 排除掉dll目录本身和它里面的文件</span>
  <span class="token literal-property property">cleanOnceBeforeBuildPatterns</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;**/*&quot;</span><span class="token punctuation">,</span> <span class="token string">'!dll'</span><span class="token punctuation">,</span> <span class="token string">'!dll/*'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>目录和文件的匹配规则使用的是 <a href="https://github.com/sindresorhus/globby#globbing-patterns" target="_blank" rel="noopener noreferrer">globbing patterns<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <ol start="3"><li>使用<code>DllReferencePlugin</code>控制打包结果</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">manifest</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./dll/jquery.manifest.json&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">manifest</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./dll/lodash.manifest.json&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p><strong>手动打包的过程</strong>：</p> <ol><li>开启<code>output.library</code>暴露公共模块</li> <li>用<code>DllPlugin</code>创建资源清单</li> <li>用<code>DllReferencePlugin</code>使用资源清单</li></ol> <p><strong>手动打包的注意事项</strong>：</p> <ol><li>资源清单不参与运行，可以不放到打包目录中</li> <li>记得手动引入公共JS，以及避免被删除</li> <li>不要对小型的公共JS库使用</li></ol> <p><strong>优点</strong>：</p> <ol><li>极大提升自身模块的打包速度</li> <li>极大的缩小了自身文件体积</li> <li>有利于浏览器缓存第三方库的公共代码</li></ol> <p><strong>缺点</strong>：</p> <ol><li>使用非常繁琐</li> <li>如果第三方库中包含重复代码，则效果不太理想</li></ol> <h2 id="_5-自动分包"><a href="#_5-自动分包" class="header-anchor">#</a> 5. 自动分包</h2> <p>不同与手动分包，自动分包是从<strong>实际的角度</strong>出发，从一个更加<strong>宏观的角度</strong>来控制分包，而一般不对具体哪个包要分出去进行控制</p> <p>因此使用自动分包，不仅非常方便，而且更加贴合实际的开发需要</p> <p>要控制自动分包，关键是要配置一个合理的<strong>分包策略</strong></p> <p>有了分包策略之后，不需要额外安装任何插件，webpack会自动的按照策略进行分包</p> <blockquote><p>实际上，webpack在内部是使用<code>SplitChunksPlugin</code>进行分包的
过去有一个库<code>CommonsChunkPlugin</code>也可以实现分包，不过由于该库某些地方并不完善，到了<code>webpack4</code>之后，已被<code>SplitChunksPlugin</code>取代</p></blockquote> <img src="/blog/img/webpack/19.jpg"> <p>从分包流程中至少可以看出以下几点：</p> <ul><li>分包策略至关重要，它决定了如何分包</li> <li>分包时，webpack开启了一个<strong>新的chunk</strong>，对分离的模块进行打包</li> <li>打包结果中，公共的部分被提取出来形成了一个单独的文件，它是新chunk的产物</li></ul> <h3 id="分包策略的基本配置"><a href="#分包策略的基本配置" class="header-anchor">#</a> 分包策略的基本配置</h3> <p>webpack提供了<code>optimization</code>配置项，用于配置一些优化信息</p> <p>其中<code>splitChunks</code>是分包策略的配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 分包策略</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>事实上，分包策略有其默认的配置，我们只需要轻微的改动，即可应对大部分分包场景</p> <ol><li>chunks</li></ol> <p>该配置项用于配置需要应用分包策略的chunk</p> <p>我们知道，分包是从已有的chunk中分离出新的chunk，那么哪些chunk需要分离呢</p> <p>chunks有三个取值，分别是：</p> <ul><li>all: 对于所有的chunk都要应用分包策略</li> <li>async：【默认】仅针对异步chunk应用分包策略</li> <li>initial：仅针对普通chunk应用分包策略</li></ul> <p>所以，你只需要配置<code>chunks</code>为<code>all</code>即可</p> <ol start="2"><li>maxSize</li></ol> <p>该配置可以控制包的最大字节数</p> <p>如果某个包（包括分出来的包）超过了该值，则webpack会尽可能的将其分离成多个包</p> <p>但是不要忽略的是，分包的<strong>基础单位是模块</strong>，如果一个完整的模块超过了该体积，它是无法做到再切割的，因此，尽管使用了这个配置，完全有可能某个包还是会超过这个体积</p> <p>另外，该配置看上去很美妙，实际意义其实不大</p> <p>因为分包的目的是<strong>提取大量的公共代码</strong>，从而减少总体积和充分利用浏览器缓存</p> <p>虽然该配置可以把一些包进行再切分，但是实际的总体积和传输量并没有发生变化</p> <blockquote><p>如果要进一步减少公共模块的体积，只能是压缩和<code>tree shaking</code></p></blockquote> <h3 id="分包策略的其他配置"><a href="#分包策略的其他配置" class="header-anchor">#</a> 分包策略的其他配置</h3> <p>如果不想使用其他配置的默认值，可以手动进行配置：</p> <ul><li>automaticNameDelimiter：新chunk名称的分隔符，默认值~</li> <li>minChunks：一个模块被多少个chunk使用时，才会进行分包，默认值1</li> <li>minSize：当分包达到多少字节后才允许被真正的拆分，默认值30000</li></ul> <h3 id="缓存组"><a href="#缓存组" class="header-anchor">#</a> 缓存组</h3> <p>之前配置的分包策略是全局的</p> <p>而实际上，分包策略是基于缓存组的</p> <p>每个缓存组提供一套独有的策略，webpack按照缓存组的优先级依次处理每个缓存组，被缓存组处理过的分包不需要再次分包</p> <p>默认情况下，webpack提供了两个缓存组：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">//全局配置</span>
      <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 属性名是缓存组名称，会影响到分包的chunk名</span>
        <span class="token comment">// 属性值是缓存组的配置，缓存组继承所有的全局配置，也有自己特殊的配置</span>
        <span class="token literal-property property">vendors</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\\/]node_modules[\\/]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 当匹配到相应模块时，将这些模块进行单独打包</span>
          <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span> <span class="token comment">// 缓存组优先级，优先级越高，该策略越先进行处理，默认值为0</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>  <span class="token comment">// 覆盖全局配置，将最小chunk引用数改为2</span>
          <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token comment">// 优先级</span>
          <span class="token literal-property property">reuseExistingChunk</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 重用已经被分离出去的chunk</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>很多时候，缓存组对于我们来说没什么意义，因为默认的缓存组就已经够用了</p> <p>但是我们同样可以利用缓存组来完成一些事情，比如对公共样式的抽离</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">styles</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 匹配样式模块</span>
          <span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 覆盖默认的最小尺寸，这里仅仅是作为测试</span>
          <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token comment">// 覆盖默认的最小chunk引用数</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&quot;./public/index.html&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;[name].[hash:5].css&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// chunkFilename是配置来自于分割chunk的文件名</span>
      <span class="token literal-property property">chunkFilename</span><span class="token operator">:</span> <span class="token string">&quot;common.[hash:5].css&quot;</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="配合多页应用"><a href="#配合多页应用" class="header-anchor">#</a> 配合多页应用</h3> <p>虽然现在单页应用是主流，但免不了还是会遇到多页应用</p> <p>由于在多页应用中需要为每个html页面指定需要的chunk，这就造成了问题</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&quot;./public/index.html&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;index~other&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;vendors~index~other&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;index&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>我们必须手动的指定被分离出去的chunk名称，这不是一种好办法</p> <p>幸好<code>html-webpack-plugin</code>的新版本中解决了这一问题</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i -D html-webpack-plugin@next
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>做出以下配置即可：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&quot;./public/index.html&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>它会自动的找到被<code>index</code>分离出去的chunk，并完成引用</p> <blockquote><p>目前这个版本仍处于测试解决，还未正式发布</p></blockquote> <h3 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h3> <p>自动分包的原理其实并不复杂，主要经过以下步骤：</p> <ol><li>检查每个chunk编译的结果</li> <li>根据分包策略，找到那些满足策略的模块</li> <li>根据分包策略，生成新的chunk打包这些模块（代码有所变化）</li> <li>把打包出去的模块从原始包中移除，并修正原始包代码</li></ol> <p>在代码层面，有以下变动</p> <ol><li>分包的代码中，加入一个全局变量，类型为数组，其中包含公共模块的代码</li> <li>原始包的代码中，使用数组中的公共代码</li></ol> <h2 id="代码压缩"><a href="#代码压缩" class="header-anchor">#</a> 代码压缩</h2> <ol><li><strong>为什么要进行代码压缩</strong></li></ol> <p>减少代码体积；破坏代码的可读性，提升破解成本；</p> <ol start="2"><li><strong>什么时候要进行代码压缩</strong></li></ol> <p>生产环境</p> <ol start="3"><li><strong>使用什么压缩工具</strong></li></ol> <p>目前最流行的代码压缩工具主要有两个：<code>UglifyJs</code>和<code>Terser</code></p> <p><code>UglifyJs</code>是一个传统的代码压缩工具，已存在多年，曾经是前端应用的必备工具，但由于它不支持<code>ES6</code>语法，所以目前的流行度已有所下降。</p> <p><code>Terser</code>是一个新起的代码压缩工具，支持<code>ES6+</code>语法，因此被很多构建工具内置使用。<code>webpack</code>安装后会内置<code>Terser</code>，当启用生产环境后即可用其进行代码压缩。</p> <p>因此，我们选择<code>Terser</code></p> <h3 id="关于副作用-side-effect"><a href="#关于副作用-side-effect" class="header-anchor">#</a> 关于副作用 side effect</h3> <p>副作用：函数运行过程中，可能会对外部环境造成影响的功能</p> <p>如果函数中包含以下代码，该函数叫做副作用函数:</p> <ul><li>异步代码</li> <li>localStorage</li> <li>对外部数据的修改</li></ul> <p>如果一个函数没有副作用，同时，函数的返回结果仅依赖参数，则该函数叫做纯函数(pure function)</p> <h3 id="terser"><a href="#terser" class="header-anchor">#</a> Terser</h3> <p>在<code>Terser</code>的官网可尝试它的压缩效果</p> <blockquote><p>Terser官网：https://terser.org/</p></blockquote> <h3 id="webpack-terser"><a href="#webpack-terser" class="header-anchor">#</a> webpack+Terser</h3> <p>webpack自动集成了<code>Terser</code></p> <p>如果你想更改、添加压缩工具，又或者是想对Terser进行配置，使用下面的webpack配置即可</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'terser-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> OptimizeCSSAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'optimize-css-assets-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 插件</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 是否要启用压缩，默认情况下，生产环境会自动开启</span>
    <span class="token literal-property property">minimize</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> 
    <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 压缩时使用的插件，可以有多个</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
      <span class="token keyword">new</span> <span class="token class-name">OptimizeCSSAssetsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>Terser</code>也只能压缩js，对css压缩需要用另外的插件<code>optimize-css-assets-webpack-plugin</code>,使用如上所示。</p> <h2 id="tree-shaking"><a href="#tree-shaking" class="header-anchor">#</a> tree-shaking</h2> <p>压缩可以移除模块内部的无效代码，tree shaking 可以移除模块之间的无效代码</p> <p>某些模块导出的代码并不一定会被用到</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// myMath.js</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;sub&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> a<span class="token operator">-</span>b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>add<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./myMath&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>tree shaking 用于移除掉不会用到的导出</p> <h3 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h3> <p><code>webpack2</code>开始就支持了<code>tree shaking</code></p> <p>只要是生产环境，<code>tree shaking</code>自动开启</p> <h3 id="原理-2"><a href="#原理-2" class="header-anchor">#</a> 原理</h3> <p>webpack会从入口模块出发寻找依赖关系</p> <p>当解析一个模块时，webpack会根据ES6的模块导入语句来判断，该模块依赖了另一个模块的哪个导出</p> <p>webpack之所以选择ES6的模块导入语句，是因为ES6模块有以下特点：</p> <ol><li>导入导出语句只能是顶层语句</li> <li>import的模块名只能是字符串常量</li> <li>import绑定的变量是不可变的</li></ol> <p>这些特征都非常有利于分析出稳定的依赖</p> <p>在具体分析依赖时，webpack坚持的原则是：<strong>保证代码正常运行，然后再尽量tree shaking</strong></p> <p>所以，如果你依赖的是一个导出的对象，由于JS语言的动态特性，以及<code>webpack</code>还不够智能，为了保证代码正常运行，它不会移除对象中的任何信息</p> <p>因此，我们在编写代码的时候，<strong>尽量</strong>：</p> <ul><li>使用<code>export xxx</code>导出，而不使用<code>export default {xxx}</code>导出</li> <li>使用<code>import {xxx} from &quot;xxx&quot;</code>导入，而不使用<code>import xxx from &quot;xxx&quot;</code>导入</li></ul> <p>依赖分析完毕后，<code>webpack</code>会根据每个模块每个导出是否被使用，标记其他导出为<code>dead code</code>，然后交给代码压缩工具处理</p> <p>代码压缩工具最终移除掉那些<code>dead code</code>代码</p> <h3 id="使用第三方库"><a href="#使用第三方库" class="header-anchor">#</a> 使用第三方库</h3> <p>某些第三方库可能使用的是<code>commonjs</code>的方式导出，比如<code>lodash</code></p> <p>又或者没有提供普通的ES6方式导出</p> <p>对于这些库，<code>tree shaking</code>是无法发挥作用的</p> <p>因此要寻找这些库的<code>es6</code>版本，好在很多流行但没有使用的<code>ES6</code>的第三方库，都发布了它的<code>ES6</code>版本，比如<code>lodash-es</code></p> <h3 id="作用域分析"><a href="#作用域分析" class="header-anchor">#</a> 作用域分析</h3> <p><code>tree shaking</code>本身并没有完善的作用域分析，可能导致在一些<code>dead code</code>函数(指程序中那些永远不会被执行到的代码)中的依赖仍然会被视为依赖</p> <p>插件<code>webpack-deep-scope-plugin</code>提供了作用域分析，可解决这些问题</p> <p>此插件很少更新了，不建议使用</p> <h3 id="副作用问题"><a href="#副作用问题" class="header-anchor">#</a> 副作用问题</h3> <p>webpack在<code>tree shaking</code>的使用，有一个原则：<strong>一定要保证代码正确运行</strong></p> <p>在满足该原则的基础上，再来决定如何<code>tree shaking</code></p> <p>因此，当<code>webpack</code>无法确定某个模块是否有副作用时，它往往将其视为有副作用</p> <p>因此，某些情况可能并不是我们所想要的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//common.js</span>
<span class="token keyword">var</span> n  <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//index.js</span>
<span class="token keyword">import</span> <span class="token string">&quot;./common.js&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>虽然我们根本没用有<code>common.js</code>的导出，但<code>webpack</code>担心<code>common.js</code>有副作用，如果去掉会影响某些功能</p> <p>如果要解决该问题，就需要标记该文件是没有副作用的</p> <p>在<code>package.json</code>中加入<code>sideEffects</code></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>有两种配置方式：</p> <ul><li>false：当前工程中，所有模块都没有副作用。注意，这种写法会影响到某些css文件的导入</li> <li>数组：设置哪些文件拥有副作用，例如：<code>[&quot;!src/common.js&quot;]</code>，表示只要不是<code>src/common.js</code>的文件，都有副作用</li></ul> <blockquote><p>这种方式我们一般不处理，通常是一些第三方库在它们自己的<code>package.json</code>中标注</p></blockquote> <h3 id="css-tree-shaking"><a href="#css-tree-shaking" class="header-anchor">#</a> css tree shaking</h3> <p><code>webpack</code>无法对<code>css</code>完成<code>tree shaking</code>，因为<code>css</code>跟<code>es6</code>没有半毛钱关系</p> <p>因此对<code>css</code>的<code>tree shaking</code>需要其他插件完成</p> <p>例如：<code>purgecss-webpack-plugin</code></p> <blockquote><p>注意：<code>purgecss-webpack-plugin</code>对<code>css module</code>无能为力</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> DeepScope <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack-deep-scope-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>default<span class="token punctuation">;</span>
<span class="token keyword">const</span> MiniCss <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Purgecss <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;purgecss-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> globAll <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;glob-all&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> srcAbs <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//得到src的绝对路径</span>
<span class="token keyword">const</span> htmlPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;public/index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> paths <span class="token operator">=</span> globAll<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>srcAbs<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">**/*.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> htmlPath<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>MiniCss<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">DeepScope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">Purgecss</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      paths
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="懒加载"><a href="#懒加载" class="header-anchor">#</a> 懒加载</h2> <p>使用<code>import()</code> ,来动态加载; 动态加载的没法tree-shaking，因为无法静态分析依赖。</p> <p>可以利用如下方式来tree-shaking</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// utils.js</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> chunk <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;lodash-es&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// index.js</span>
<span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//动态加载</span>
  <span class="token comment">//import 是ES6的草案</span>
  <span class="token comment">//浏览器会使用JSOP的方式远程去读取一个js模块</span>
  <span class="token comment">//import()会返回一个promise   （* as obj）</span>
  <span class="token comment">// const { chunk } = await import(/* webpackChunkName:&quot;lodash&quot; */&quot;lodash-es&quot;);</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> chunk <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./util&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">chunk</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>如上所示，utils.js文件静态引入lodash，则会进行tree-shaking，然后我们再使用utils.js</p> <h2 id="gzip"><a href="#gzip" class="header-anchor">#</a> gzip</h2> <p>gzip是一种压缩文件的算法</p> <h3 id="b-s结构中的压缩传输"><a href="#b-s结构中的压缩传输" class="header-anchor">#</a> B/S结构中的压缩传输</h3> <img src="/blog/img/webpack/20.jpg"> <p>优点：传输效率可能得到大幅提升</p> <p>缺点：服务器的压缩需要时间，客户端的解压需要时间</p> <h3 id="使用webpack进行预压缩"><a href="#使用webpack进行预压缩" class="header-anchor">#</a> 使用webpack进行预压缩</h3> <p>使用<code>compression-webpack-plugin</code>插件对打包结果进行预压缩，可以移除服务器的压缩时间</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> CmpressionWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;compression-webpack-plugin&quot;</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CmpressionWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">minRatio</span><span class="token operator">:</span> <span class="token number">0.5</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="eslint"><a href="#eslint" class="header-anchor">#</a> ESLint</h2> <p>ESLint是一个针对JS的代码风格<strong>检查</strong>工具，当不满足其要求的风格时，会给予警告或错误</p> <p><a href="https://eslint.org/" target="_blank" rel="noopener noreferrer">官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://eslint.bootcss.com/" target="_blank" rel="noopener noreferrer">民间中文网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="使用-2"><a href="#使用-2" class="header-anchor">#</a> 使用</h3> <p>ESLint通常配合编辑器使用</p> <ol><li>在vscode中安装<code>ESLint</code></li></ol> <p>该工具会自动检查工程中的JS文件</p> <p>检查的工作交给<code>eslint</code>库，如果当前工程没有，则会去全局库中查找，如果都没有，则无法完成检查</p> <p>另外，检查的依据是<code>eslint</code>的配置文件<code>.eslintrc</code>，如果找不到工程中的配置文件，也无法完成检查</p> <ol start="2"><li>安装<code>eslint</code></li></ol> <p><code>npm i [-g] eslint</code></p> <ol start="3"><li>创建配置文件</li></ol> <p>可以通过<code>eslint</code>交互式命令创建配置文件</p> <blockquote><p>由于windows环境中git窗口对交互式命名支持不是很好，建议使用powershell</p></blockquote> <p><code>npx eslint --init</code></p> <blockquote><p>eslint会识别工程中的<code>.eslintrc.*</code>文件，也能够识别<code>package.json</code>中的<code>eslintConfig</code>字段</p></blockquote> <h3 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h3> <h4 id="env"><a href="#env" class="header-anchor">#</a> env</h4> <p>配置代码的运行环境</p> <ul><li>browser：代码是否在浏览器环境中运行</li> <li>es6：是否启用ES6的全局API，例如<code>Promise</code>等</li></ul> <h4 id="parseroptions"><a href="#parseroptions" class="header-anchor">#</a> parserOptions</h4> <p>该配置指定<code>eslint</code>对哪些语法的支持</p> <ul><li>ecmaVersion: 支持的ES语法版本</li> <li>sourceType
<ul><li>script：传统脚本</li> <li>module：模块化脚本</li></ul></li></ul> <h4 id="parser"><a href="#parser" class="header-anchor">#</a> parser</h4> <p><code>eslint</code>的工作原理是先将代码进行解析，然后按照规则进行分析</p> <p><code>eslint</code> 默认使用<code>Espree</code>作为其解析器，你可以在配置文件中指定一个不同的解析器。</p> <h4 id="globals"><a href="#globals" class="header-anchor">#</a> globals</h4> <p>配置可以使用的额外的全局变量</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;globals&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;var1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;readonly&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;var2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;writable&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>eslint</code>支持注释形式的配置，在代码中使用下面的注释也可以完成配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* global var1, var2 */</span>
<span class="token comment">/* global var3:writable, var4:writable */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="extends"><a href="#extends" class="header-anchor">#</a> extends</h4> <p>该配置继承自哪里</p> <p>它的值可以是字符串或者数组</p> <p>比如：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint:recommended&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>表示，该配置缺失的位置，使用<code>eslint</code>推荐的规则</p> <h4 id="ignorefiles"><a href="#ignorefiles" class="header-anchor">#</a> ignoreFiles</h4> <p>排除掉某些不需要验证的文件</p> <p><code>.eslintignore</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>dist/**/*.js
node_modules
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="rules"><a href="#rules" class="header-anchor">#</a> rules</h4> <p><code>eslint</code>规则集</p> <p>每条规则影响某个方面的代码风格</p> <p>每条规则都有下面几个取值：</p> <ul><li>off 或 0 或 false: 关闭该规则的检查</li> <li>warn 或 1 或 true：警告，不会导致程序退出</li> <li>error 或 2：错误，当被触发的时候，程序会退出</li></ul> <p>除了在配置文件中使用规则外，还可以在注释中使用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* eslint eqeqeq: &quot;off&quot;, curly: &quot;error&quot; */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>https://eslint.bootcss.com/docs/rules/</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// .eslintrc.json</span>
<span class="token punctuation">{</span>
  <span class="token string-property property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;browser&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;es6&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint:recommended&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;parserOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;ecmaVersion&quot;</span><span class="token operator">:</span> <span class="token number">2018</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;sourceType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;module&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;curly&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="bundle-analyzer"><a href="#bundle-analyzer" class="header-anchor">#</a> bundle-analyzer</h2> <p>当我们需要分析打包文件dist里哪些资源可以进一步优化时，就可以使用包分析器插件<code>webpack-bundle-analyzer</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> WebpackBundleAnalyzer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack-bundle-analyzer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>BundleAnalyzerPlugin<span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">WebpackBundleAnalyzer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/build-tool/webpack/js.html" class="prev">
        js兼容性
      </a></span> <span class="next"><a href="/blog/build-tool/webpack/extend.html">
        扩展
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.0f56b445.js" defer></script><script src="/blog/assets/js/2.a77c63c4.js" defer></script><script src="/blog/assets/js/33.26dc1e8b.js" defer></script>
  </body>
</html>
