# 02-Event Loop事件循环

## 事件队列

- 宏任务（队列）macroTask：`script`，计时器(`setTimeout`， `setInterval`)，ajax请求，dom事件
- 微任务（队列）microTask：`Promise.then`, `MutationObserver` 

## 事件循环闭环流程
当主线程执行栈为空时，执行以下步骤：

1. 执行微任务队列  
    a. 选择微任务队列中最早的任务（任务X）  
    b. 若任务x为空，跳转到步骤g  
    c. 将当前正在执行的任务设置为 任务X  
    d. 执行 任务x  
    e. 执行完毕后，将当前任务设置为空，删除 任务x  
    f. 选择微任务队列中下一个最早的任务，跳转步骤b  
    g. 完成微任务队列；  
2. 选择宏任务队列中最早的任务 （任务A）
3. 将当前正在执行的任务设置为 任务A
4. 执行任务A的回调函数
5. 跳转到第1步
6. 执行完毕后，将当前任务设置为空，删除 任务A 结束本次Loop循环
7. 跳到第2步
